(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{2894:function(e,s,t){Promise.resolve().then(t.bind(t,4710))},4710:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return q}});var n,l,a,i,o,r,c={};t.r(c),t.d(c,{advanceToNextRound:function(){return D},createInitialRounds:function(){return A},createMatch:function(){return E},updateMatchScore:function(){return _}});var d={};t.r(d),t.d(d,{advanceToNextRound:function(){return O},createInitialRounds:function(){return P},createMatch:function(){return F},updateMatchScore:function(){return W}});var m=t(7437),u=t(2167),h=t(5251),p=t(6691),g=t.n(p),x=t(7042),b=t(4769);function f(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,b.m6)((0,x.W)(s))}let w=e=>{let{team:s,score:t,wins:n=0,losses:l=0,isWinner:a,isEliminated:i,bracket:o="winners",logo:r,selectedLeague:c}=e;return(0,m.jsxs)("div",{className:f("p-3 rounded-lg border flex items-center gap-3 transition-colors",(()=>{switch(o){case"winners":return"bg-blue-50 border-blue-200";case"losers":return"bg-red-50 border-red-200";case"championship":return"bg-purple-50 border-purple-200";default:return"bg-gray-50 border-gray-100"}})(),i&&"opacity-75"),children:[(0,m.jsx)("div",{className:"w-10 h-10 flex-shrink-0 relative",children:r?(0,m.jsx)(g(),{src:r,alt:s.name,fill:!0,className:"object-contain",priority:!0}):(0,m.jsx)("span",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-400",children:"?"})}),(0,m.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsxs)("p",{className:"font-medium truncate text-gray-900",children:[s.city," ",s.name]}),a&&(0,m.jsx)("span",{className:"flex-shrink-0",children:(0,m.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,m.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:["Wins: ",n," | Losses: ",l]}),t>0&&(0,m.jsxs)("p",{className:"text-sm font-medium text-black",children:[t," pts"]})]})]})]})};var y=t(2265);let v=[{id:"nyy",name:"Yankees",city:"New York",losses:0},{id:"bos",name:"Red Sox",city:"Boston",losses:0},{id:"tor",name:"Blue Jays",city:"Toronto",losses:0},{id:"tb",name:"Rays",city:"Tampa Bay",losses:0},{id:"bal",name:"Orioles",city:"Baltimore",losses:0},{id:"cws",name:"White Sox",city:"Chicago",losses:0},{id:"cle",name:"Guardians",city:"Cleveland",losses:0},{id:"det",name:"Tigers",city:"Detroit",losses:0},{id:"kc",name:"Royals",city:"Kansas City",losses:0},{id:"min",name:"Twins",city:"Minnesota",losses:0},{id:"hou",name:"Astros",city:"Houston",losses:0},{id:"ana",name:"Angels",city:"Los Angeles",losses:0},{id:"oak",name:"Athletics",city:"Oakland",losses:0},{id:"sea",name:"Mariners",city:"Seattle",losses:0},{id:"tex",name:"Rangers",city:"Texas",losses:0},{id:"atl",name:"Braves",city:"Atlanta",losses:0},{id:"mia",name:"Marlins",city:"Miami",losses:0},{id:"nym",name:"Mets",city:"New York",losses:0},{id:"phi",name:"Phillies",city:"Philadelphia",losses:0},{id:"wsh",name:"Nationals",city:"Washington",losses:0},{id:"chc",name:"Cubs",city:"Chicago",losses:0},{id:"cin",name:"Reds",city:"Cincinnati",losses:0},{id:"mil",name:"Brewers",city:"Milwaukee",losses:0},{id:"pit",name:"Pirates",city:"Pittsburgh",losses:0},{id:"stl",name:"Cardinals",city:"St. Louis",losses:0},{id:"ari",name:"Diamondbacks",city:"Arizona",losses:0},{id:"col",name:"Rockies",city:"Colorado",losses:0},{id:"lad",name:"Dodgers",city:"Los Angeles",losses:0},{id:"sd",name:"Padres",city:"San Diego",losses:0},{id:"sf",name:"Giants",city:"San Francisco",losses:0},{id:"dom",name:"Dominican",city:"RD",losses:0},{id:"pr",name:"Boricua",city:"Puerto Rico",losses:0}],N=[{id:"ne",name:"Patriots",city:"New England",losses:0},{id:"kc",name:"Chiefs",city:"Kansas City",losses:0},{id:"dal",name:"Cowboys",city:"Dallas",losses:0},{id:"sf",name:"49ers",city:"San Francisco",losses:0},{id:"gb",name:"Packers",city:"Green Bay",losses:0},{id:"buf",name:"Bills",city:"Buffalo",losses:0},{id:"pit",name:"Steelers",city:"Pittsburgh",losses:0},{id:"bal",name:"Ravens",city:"Baltimore",losses:0},{id:"cin",name:"Bengals",city:"Cincinnati",losses:0},{id:"cle",name:"Browns",city:"Cleveland",losses:0},{id:"ten",name:"Titans",city:"Tennessee",losses:0},{id:"ind",name:"Colts",city:"Indianapolis",losses:0},{id:"hou",name:"Texans",city:"Houston",losses:0},{id:"jax",name:"Jaguars",city:"Jacksonville",losses:0},{id:"lv",name:"Raiders",city:"Las Vegas",losses:0},{id:"lac",name:"Chargers",city:"Los Angeles",losses:0},{id:"den",name:"Broncos",city:"Denver",losses:0},{id:"nyj",name:"Jets",city:"New York",losses:0},{id:"mia",name:"Dolphins",city:"Miami",losses:0},{id:"phi",name:"Eagles",city:"Philadelphia",losses:0},{id:"nyg",name:"Giants",city:"New York",losses:0},{id:"wsh",name:"Commanders",city:"Washington",losses:0},{id:"det",name:"Lions",city:"Detroit",losses:0},{id:"chi",name:"Bears",city:"Chicago",losses:0},{id:"min",name:"Vikings",city:"Minnesota",losses:0},{id:"no",name:"Saints",city:"New Orleans",losses:0},{id:"tb",name:"Buccaneers",city:"Tampa Bay",losses:0},{id:"car",name:"Panthers",city:"Carolina",losses:0},{id:"atl",name:"Falcons",city:"Atlanta",losses:0},{id:"ari",name:"Cardinals",city:"Arizona",losses:0},{id:"lar",name:"Rams",city:"Los Angeles",losses:0},{id:"sea",name:"Seahawks",city:"Seattle",losses:0}],j=[{id:"bos",name:"Celtics",city:"Boston",losses:0},{id:"bkn",name:"Nets",city:"Brooklyn",losses:0},{id:"ny",name:"Knicks",city:"New York",losses:0},{id:"phi",name:"76ers",city:"Philadelphia",losses:0},{id:"tor",name:"Raptors",city:"Toronto",losses:0},{id:"chi",name:"Bulls",city:"Chicago",losses:0},{id:"cle",name:"Cavaliers",city:"Cleveland",losses:0},{id:"det",name:"Pistons",city:"Detroit",losses:0},{id:"ind",name:"Pacers",city:"Indiana",losses:0},{id:"mil",name:"Bucks",city:"Milwaukee",losses:0},{id:"atl",name:"Hawks",city:"Atlanta",losses:0},{id:"cha",name:"Hornets",city:"Charlotte",losses:0},{id:"mia",name:"Heat",city:"Miami",losses:0},{id:"orl",name:"Magic",city:"Orlando",losses:0},{id:"wsh",name:"Wizards",city:"Washington",losses:0},{id:"den",name:"Nuggets",city:"Denver",losses:0},{id:"min",name:"Timberwolves",city:"Minnesota",losses:0},{id:"okc",name:"Thunder",city:"Oklahoma City",losses:0},{id:"por",name:"Trail Blazers",city:"Portland",losses:0},{id:"utah",name:"Jazz",city:"Utah",losses:0},{id:"gs",name:"Warriors",city:"Golden State",losses:0},{id:"lac",name:"Clippers",city:"Los Angeles",losses:0},{id:"lal",name:"Lakers",city:"Los Angeles",losses:0},{id:"phx",name:"Suns",city:"Phoenix",losses:0},{id:"sac",name:"Kings",city:"Sacramento",losses:0},{id:"dal",name:"Mavericks",city:"Dallas",losses:0},{id:"hou",name:"Rockets",city:"Houston",losses:0},{id:"mem",name:"Grizzlies",city:"Memphis",losses:0},{id:"no",name:"Pelicans",city:"New Orleans",losses:0},{id:"sa",name:"Spurs",city:"San Antonio",losses:0},{id:"vb",name:"Bears",city:"Vancouver",losses:0},{id:"sea",name:"SuperSonics",city:"Seattle",losses:0}];(n=i||(i={})).MLB="MLB",n.NFL="NFL",n.NBA="NBA",(l=o||(o={})).NOT_STARTED="NOT_STARTED",l.IN_PROGRESS="IN_PROGRESS",l.COMPLETED="COMPLETED";let C={MLB:{bg:"bg-[#092668]",border:"border-[#092668]",tableLabel:"bg-white border-[#092668] text-[#092668]",winner:"bg-blue-50 text-[#092668]",loser:"bg-red-50 text-red-700",championship:"bg-purple-50 text-purple-700",button:"bg-[#f0f0f0] text-black",buttonHover:"hover:bg-[#9e9e9e]",input:"border-[#092668] focus:ring-[#092668]"},NFL:{bg:"bg-[#ffffff]",border:"border-[#E0E0E0]",tableLabel:"bg-[#092668] border-[#E0E0E0] text-white",winner:"bg-[#E0E0E0] text-[#092668] font-size-2xl  font-bold",loser:"bg-red-50 text-red-700",championship:"bg-purple-50 text-purple-700",button:"bg-[#092668] text-white",buttonHover:"hover:bg-[#020105] text-white",input:"border-[#092668] focus:ring-[#092668]"},NBA:{bg:"bg-[#1d428a]",border:"border-[#c8102e]",tableLabel:"bg-[#c8102e] border-[#c8102e] text-white",winner:"bg-[#ffffff] text-[#1d428a] font-size-2xl  font-bold",loser:"bg-red-50 text-red-700",championship:"bg-purple-50 text-purple-700",button:"bg-white text-[#1d428a]",buttonHover:"hover:bg-[#c8102e]",input:"border-[#092668] focus:ring-[#092668]"},default:{bg:"bg-gray-400",border:"border-gray-500",tableLabel:"bg-gray-400 border-gray-500 text-white",winner:"bg-gray-50 text-gray-700",loser:"bg-gray-100 text-gray-500",championship:"bg-gray-200 text-gray-800",button:"bg-[#092668] text-white",buttonHover:"hover:bg-[#020105]",input:"border-[#092668] focus:ring-[#092668]"}},L=e=>{var s,t,n,l,a,o,r,c,d,u;let{match:p,tournament:g,tableNumber:x,onScoreUpdate:b,isEditable:f=!0,selectedLeague:v}=e,N=e=>{let s=e.replace(/ /g,"-").toLowerCase()+".png",t="/mlb-teams/";return(v===i.NFL?t="/nfl-teams/":v===i.NBA&&(t="/nba-teams/"),v===i.NBA&&"nba"===e.toLowerCase())?"/nba_logo.png":"".concat(t).concat(s)},j=p.team1?N(p.team1.name):"",L=p.team2?N(p.team2.name):"";p.team1&&p.team1.name,p.team2&&p.team2.name;let S=p.team1&&g.eliminatedTeams.includes(p.team1),k=p.team2&&g.eliminatedTeams.includes(p.team2),[T,M]=(0,y.useState)({team1Score:p.score.team1Score,team2Score:p.score.team2Score});(0,y.useEffect)(()=>{M(p.score)},[p.score]);let B=(e,s)=>{let t=Math.max(0,Math.min(200,parseInt(s)||0));M(1===e?{team1Score:t,team2Score:T.team2Score}:{team1Score:T.team1Score,team2Score:t})},R=!p.isCompleted&&f,E=C[v]||C.default;return(0,m.jsxs)(h.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:R?1.02:1},className:"w-full max-w-full rounded-2xl shadow-xl border-2 px-3 py-4 sm:px-6 sm:py-5 mb-4 font-poppins bg-gradient-to-br ".concat(E.bg," ").concat(E.border),children:[(0,m.jsx)("div",{className:"mb-2 flex justify-between items-center",children:"number"==typeof x&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full text-lg font-bold shadow-md border-2 mr-2 ".concat(E.tableLabel),title:"Table ".concat(x),children:x}),(0,m.jsxs)("span",{className:"text-xs font-bold tracking-wide uppercase px-2 py-1 rounded ".concat(E.tableLabel),children:["Table ",x]})]})}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(w,{team:null!==(a=p.team1)&&void 0!==a?a:{id:"tbd1",name:"TBD",city:"",losses:0},score:T.team1Score,wins:null!==(o=null===(s=p.team1)||void 0===s?void 0:s.wins)&&void 0!==o?o:0,losses:null!==(r=null===(t=p.team1)||void 0===t?void 0:t.losses)&&void 0!==r?r:0,isWinner:p.winner===p.team1,isEliminated:!!S,bracket:p.bracket,logo:j,selectedLeague:v}),R&&(0,m.jsx)("input",{type:"number",min:"0",max:200,value:T.team1Score,onChange:e=>B(1,e.target.value),className:"absolute right-2 top-2 w-16 text-right border-2 border-[#a259f7] bg-black/10 text-black font-bold rounded-lg px-2 py-1 focus:ring-2 focus:ring-[#a259f7]",placeholder:"0"})]}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(w,{team:null!==(c=p.team2)&&void 0!==c?c:{id:"tbd2",name:"TBD",city:"",losses:0},score:T.team2Score,wins:null!==(d=null===(n=p.team2)||void 0===n?void 0:n.wins)&&void 0!==d?d:0,losses:null!==(u=null===(l=p.team2)||void 0===l?void 0:l.losses)&&void 0!==u?u:0,isWinner:p.winner===p.team2,isEliminated:!!k,bracket:p.bracket,logo:L,selectedLeague:v}),R&&(0,m.jsx)("input",{type:"number",min:"0",max:200,value:T.team2Score,onChange:e=>B(2,e.target.value),className:"absolute right-2 top-2 w-16 text-right border-2 border-[#a259f7] bg-black/10 text-black font-bold rounded-lg px-2 py-1 focus:ring-2 focus:ring-[#a259f7]",placeholder:"0"})]}),R&&(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 mt-2 w-full",children:[(0,m.jsx)("button",{onClick:()=>{null==b||b(p.id,T.team1Score,T.team2Score)},className:"w-full sm:w-1/2 py-2 rounded-lg shadow transition ".concat(C[v].button," ").concat(C[v].buttonHover),children:"Submit"}),(0,m.jsx)("button",{onClick:()=>{null==b||b(p.id,0,0)},className:"w-full sm:w-1/2 py-2 rounded-lg shadow transition ".concat(C[v].button," ").concat(C[v].buttonHover),children:"Reset"})]}),p.isCompleted&&p.winner&&(0,m.jsx)(m.Fragment,{children:"championship"===p.bracket?p.requiresRematch?(0,m.jsx)("div",{className:"font-bold text-lg text-white mt-3 text-center py-2 rounded-lg bg-yellow-100 text-yellow-800 font-semibold text-sm",children:"Championship rematch required!"}):(0,m.jsxs)(h.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.8,type:"spring",stiffness:100},className:"relative mt-6 text-center py-6 rounded-xl overflow-hidden font-semibold",children:[(0,m.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 opacity-90"}),(0,m.jsx)("div",{className:"absolute inset-0 bg-[url('/trophy-pattern.png')] opacity-10 bg-repeat"}),(0,m.jsx)("div",{className:"absolute top-2 left-4 text-3xl animate-bounce-slow delay-100",children:"\uD83C\uDF89"}),(0,m.jsx)("div",{className:"absolute top-2 right-4 text-3xl animate-bounce-slow delay-300",children:"\uD83C\uDF8A"}),(0,m.jsx)("div",{className:"absolute bottom-2 left-10 text-2xl animate-bounce delay-200",children:"\uD83C\uDF89"}),(0,m.jsx)("div",{className:"absolute bottom-2 right-10 text-2xl animate-bounce delay-400",children:"\uD83C\uDF8A"}),(0,m.jsxs)("div",{className:"relative z-10 flex flex-col items-center justify-center space-y-3",children:[(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("div",{className:"absolute inset-0 rounded-full bg-yellow-400 blur-md transform scale-110 opacity-70"}),(0,m.jsx)("span",{className:"relative text-6xl drop-shadow-lg animate-pulse-slow",children:"\uD83C\uDFC6"})]}),(0,m.jsxs)("div",{className:"relative mt-2 mb-1",children:[(0,m.jsx)("h2",{className:"text-white text-2xl font-bold tracking-wide",children:p.winner.name}),(0,m.jsx)("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-3/4 h-1 bg-gradient-to-r from-transparent via-yellow-400 to-transparent"})]}),(0,m.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-white px-6 py-1.5 rounded-full font-bold tracking-wider uppercase text-sm shadow-lg",children:"Tournament Champion"}),(0,m.jsxs)("div",{className:"mt-2 text-white text-sm",children:["Final Score: ",p.score.team1Score," -"," ",p.score.team2Score]}),p.loser&&(0,m.jsxs)("div",{className:"text-gray-200 text-sm mt-1",children:["Runner-up: ",p.loser.name]})]})]}):(0,m.jsxs)(h.E.div,{initial:{opacity:0},animate:{opacity:1},className:"font-bold text-lg mt-3 text-center py-2 rounded-lg text-sm font-medium ".concat("winners"===p.bracket?E.winner:"losers"===p.bracket?E.loser:E.championship),children:[p.winner.name," Wins!",p.loser&&g.eliminatedTeams.includes(p.loser)&&(0,m.jsxs)("div",{className:"font-bold text-lg text-red-600 mt-1 font-semibold",children:[p.loser.name," Eliminated"]})]})})]})]})},S=e=>{let{tournament:s,onMatchUpdate:t,selectedLeague:n,onResetCurrentRound:l}=e,[a,i]=(0,y.useState)(s.currentRound),[o,r]=(0,y.useState)(!0);(0,y.useEffect)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[a]),(0,y.useEffect)(()=>{if(!o)return;let e=s.rounds.find(e=>e.roundNumber===a);if(e&&e.matches.every(e=>e.isCompleted)){let e=a+1;s.rounds.some(s=>s.roundNumber===e)&&i(e)}},[a,s.rounds,o]);let c=(0,y.useCallback)((e,n,l)=>{let a=s.rounds.find(s=>s.matches.some(s=>s.id===e));if(!a)return;let i=a.matches.find(s=>s.id===e);i&&(null==t||t({...i,score:{team1Score:n,team2Score:l}}))},[s,t]),d=(0,y.useMemo)(()=>s.rounds.map(e=>{let s=e.matches.filter(e=>"winners"===e.bracket).sort((e,s)=>null===e.team2&&null!==s.team2?-1:null!==e.team2&&null===s.team2?1:0),t=e.matches.filter(e=>"losers"===e.bracket).sort((e,s)=>null===e.team2&&null!==s.team2?-1:null!==e.team2&&null===s.team2?1:0),n=e.matches.filter(e=>"championship"===e.bracket);return{roundNumber:e.roundNumber,winners:s,losers:t,championship:n,isDoubleElimination:e.isDoubleElimination,isChampionshipRound:e.isChampionshipRound}}),[s.rounds]),p=e=>{i(e),r(e===s.currentRound)},x=(e,s,t)=>{let n={},l=1,a=e=>e.team1&&e.team2&&"TBD"!==e.team1.name&&"TBD"!==e.team2.name;return e.forEach(e=>{a(e)&&l<=16?n[e.id]=l++:n[e.id]=null}),s.forEach(e=>{a(e)&&l<=16?n[e.id]=l++:n[e.id]=null}),t.forEach(e=>{a(e)&&l<=16?n[e.id]=l++:n[e.id]=null}),n};return(0,m.jsxs)("div",{className:"w-full",children:[(0,m.jsx)("div",{className:"mb-8 border-b",children:(0,m.jsx)("div",{className:"flex overflow-x-auto",children:d.map(e=>(0,m.jsx)("button",{onClick:()=>p(e.roundNumber),className:f("px-6 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors",a===e.roundNumber?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:e.isChampionshipRound?"Championship":"Round ".concat(e.roundNumber)},e.roundNumber))})}),(0,m.jsx)(u.M,{mode:"wait",children:d.map(e=>e.roundNumber===a&&(0,m.jsxs)(h.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[e.championship.length>0&&(0,m.jsxs)("div",{className:"mb-12",children:[(0,m.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:["Championship Match",e.championship[0].requiresRematch&&(0,m.jsx)("span",{className:"ml-3 text-sm bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full",children:"Rematch Required"})]}),(0,m.jsx)("div",{className:"flex justify-center",children:(0,m.jsx)("div",{className:"w-[400px]",children:(()=>{let t=x(e.winners,e.losers,e.championship);return e.championship.map(e=>(0,m.jsx)(L,{match:e,tournament:s,tableNumber:t[e.id],onScoreUpdate:c,isEditable:!e.isCompleted,selectedLeague:n},e.id))})()})})]}),e.winners.length>0&&(0,m.jsxs)("div",{className:"mb-8",children:[(0,m.jsxs)("h3",{className:"text-xl font-semibold text-blue-700 mb-4 flex items-center",children:["Winners Bracket",(0,m.jsxs)("span",{className:"ml-3 text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded-full",children:[e.winners.length," Matches"]})]}),(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(()=>{let t=x(e.winners,e.losers,e.championship);return e.winners.map(e=>(0,m.jsx)(L,{match:e,tournament:s,tableNumber:t[e.id],onScoreUpdate:c,isEditable:!e.isCompleted,selectedLeague:n},e.id))})()})]}),e.losers.length>0&&(0,m.jsxs)("div",{className:"pt-8 border-t",children:[(0,m.jsxs)("h3",{className:"text-xl font-semibold text-red-700 mb-4 flex items-center",children:["Losers Bracket",(0,m.jsxs)("span",{className:"ml-3 text-sm bg-red-100 text-red-700 px-3 py-1 rounded-full",children:[e.losers.length," Matches"]})]}),(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(()=>{let t=x(e.winners,e.losers,e.championship);return e.losers.map(e=>(0,m.jsx)(L,{match:e,tournament:s,tableNumber:t[e.id],onScoreUpdate:c,isEditable:!e.isCompleted,selectedLeague:n},e.id))})()})]}),s.eliminatedTeams.length>0&&(0,m.jsxs)("div",{className:"mt-8 pt-8 border-t",children:[(0,m.jsxs)("h3",{className:"text-xl font-semibold text-red-700 mb-4 flex items-center",children:[(0,m.jsx)("span",{children:"Eliminated Teams"}),(0,m.jsxs)("span",{className:"ml-3 text-sm bg-red-100 text-red-700 px-3 py-1 rounded-full",children:[s.eliminatedTeams.length," Teams"]})]}),(0,m.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.eliminatedTeams.map(e=>(0,m.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,m.jsxs)("div",{className:"flex items-center space-x-3",children:[e.logo&&(0,m.jsx)("div",{className:"w-8 h-8 relative",children:(0,m.jsx)(g(),{src:e.logo,alt:e.name,fill:!0,className:"object-contain"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"font-medium text-red-700",children:e.name}),(0,m.jsxs)("div",{className:"text-xs text-red-600",children:[e.losses," Losses"]})]})]})},e.id))})]}),(0,m.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[(0,m.jsxs)("h4",{className:"font-medium text-gray-900 mb-2",children:[e.isChampionshipRound?"Championship":"Round ".concat(e.roundNumber)," ","Summary"]}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-gray-600",children:"Winners Bracket:"}),(0,m.jsxs)("p",{className:"font-medium",children:[e.winners.length," matches"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-gray-600",children:"Losers Bracket:"}),(0,m.jsxs)("p",{className:"font-medium",children:[e.losers.length," matches"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-gray-600",children:"Championship:"}),(0,m.jsxs)("p",{className:"font-medium",children:[e.championship.length," matches"]})]})]})]})]},e.roundNumber))}),s.winner&&(0,m.jsxs)(h.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mt-8 p-6 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl text-center text-white",children:[(0,m.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"Tournament Champion"}),(0,m.jsxs)("p",{className:"text-xl",children:[s.winner.city," ",s.winner.name]})]})]})},k=["MARLINS","DODGERS","CARDINALS","PADRES","RED SOX","ROCKIES","RAYS","GUARDIANS","REDS","ORIOLES","MARINERS","REP DOM","GIANTS","ASTROS","ROYALS","RANGERS","NATIONALS","BREWERS","CUBS","TWINS","ANGELS","PHILLIES","WHITE SOX","DIAMONDBACKS","BLUE JAYS","TIGERS","BRAVES","PUERTO RICO","YANKEES","METS","ATHLETICS","PIRATES"];k.map((e,s)=>({name:e,seed:s+1}));let T=function(e,s,t,n){var l;let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"winners",o=arguments.length>6?arguments[6]:void 0,r=arguments.length>7?arguments[7]:void 0;return{id:e,roundNumber:s,team1:t,team2:n,isCompleted:a,isBye:a,bracket:i,winner:a&&null!==(l=null!=t?t:n)&&void 0!==l?l:void 0,loser:void 0,score:{team1Score:0,team2Score:0},nextMatchId:o,nextLoserMatchId:r,eliminatedLabel:void 0}},M=e=>{let s=e.length,t=[],n=Math.pow(2,Math.ceil(Math.log2(s))-1),l=1;for(let s=0;s<n;s++){let n=e[2*s]||null,a=e[2*s+1]||null,i=!n||!a,o="W1-".concat(l),r="W2-".concat(Math.ceil(l/2)),c="L1-".concat(Math.ceil(l/2));t.push(T(o,1,n,a,i,"winners",r,c)),l++}return{rounds:[{roundNumber:1,matches:t,isDoubleElimination:!0,isChampionshipRound:!1}],currentRound:1,eliminatedTeams:[],championshipMatchesPlayed:0}};function B(e,s){return{id:e.toLowerCase().replace(/[^a-z0-9]/g,"_"),name:e,city:"",losses:0}}function R(){return M(k.map(B))}let E=function(e,s,t,n){var l;let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"winners",o=arguments.length>6?arguments[6]:void 0,r=arguments.length>7?arguments[7]:void 0;return{id:e,roundNumber:s,team1:t,team2:n,isCompleted:a,isBye:a,bracket:i,winner:a&&null!==(l=null!=t?t:n)&&void 0!==l?l:void 0,loser:void 0,score:{team1Score:0,team2Score:0},nextMatchId:o,nextLoserMatchId:r,eliminatedLabel:void 0}},A=e=>{let s=e.length,t=[],n=Math.pow(2,Math.ceil(Math.log2(s))-1),l=1;for(let s=0;s<n;s++){let n=e[2*s]||null,a=e[2*s+1]||null,i=!n||!a,o="W1-".concat(l),r="W2-".concat(Math.ceil(l/2)),c="L1-".concat(Math.ceil(l/2));t.push(E(o,1,n,a,i,"winners",r,c)),l++}return{rounds:[{roundNumber:1,matches:t,isDoubleElimination:!0,isChampionshipRound:!1}],currentRound:1,eliminatedTeams:[],championshipMatchesPlayed:0}},_=(e,s)=>{let t,n;let l=s.team1Score!==s.team2Score;if(l){var a,i,o,r,c,d,m,u;s.team1Score>s.team2Score?(t=e.team1?{...e.team1,wins:(null!==(a=e.team1.wins)&&void 0!==a?a:0)+1,losses:null!==(i=e.team1.losses)&&void 0!==i?i:0}:void 0,n=e.team2?{...e.team2,wins:null!==(o=e.team2.wins)&&void 0!==o?o:0,losses:(null!==(r=e.team2.losses)&&void 0!==r?r:0)+1}:void 0):(t=e.team2?{...e.team2,wins:(null!==(c=e.team2.wins)&&void 0!==c?c:0)+1,losses:null!==(d=e.team2.losses)&&void 0!==d?d:0}:void 0,n=e.team1?{...e.team1,wins:null!==(m=e.team1.wins)&&void 0!==m?m:0,losses:(null!==(u=e.team1.losses)&&void 0!==u?u:0)+1}:void 0)}return{...e,score:s,isCompleted:l,winner:t,loser:n}},D=e=>{let s=e.rounds[e.rounds.length-1],t=e.currentRound+1,n={},l={};e.rounds.forEach(e=>{e.matches.forEach(e=>{e.isCompleted&&e.loser&&(n[e.loser.id]=(n[e.loser.id]||0)+1),e.isCompleted&&e.winner&&(l[e.winner.id]=(l[e.winner.id]||0)+1)})});let a=[],i=new Set;for(let s of e.rounds)for(let e of s.matches)e.team1&&!i.has(e.team1.id)&&(a.push({...e.team1,wins:l[e.team1.id]||0,losses:n[e.team1.id]||0}),i.add(e.team1.id)),e.team2&&!i.has(e.team2.id)&&(a.push({...e.team2,wins:l[e.team2.id]||0,losses:n[e.team2.id]||0}),i.add(e.team2.id));let o=[];for(let s of a)(n[s.id]||0)>=2&&!e.eliminatedTeams.some(e=>e.id===s.id)&&o.push(s);let r=a.filter(s=>0===(n[s.id]||0)&&!e.eliminatedTeams.some(e=>e.id===s.id)&&!o.some(e=>e.id===s.id)).map(e=>({...e,losses:n[e.id]||0,wins:l[e.id]||0})),c=a.filter(s=>1===(n[s.id]||0)&&!e.eliminatedTeams.some(e=>e.id===s.id)&&!o.some(e=>e.id===s.id)).map(e=>({...e,losses:n[e.id]||0,wins:l[e.id]||0})),d=!1,m=[],u=[],h=!1,p=!1,g=e.rounds.filter(e=>e.isChampionshipRound).flatMap(e=>e.matches).filter(e=>"championship"===e.bracket);if(g.length>=1&&g[g.length-1].isCompleted){var x;let s=g[g.length-1],n=s.team1,l=s.team2;if((null===(x=s.winner)||void 0===x?void 0:x.id)===(null==l?void 0:l.id)&&1===e.championshipMatchesPlayed){d=!0;let e=E("C".concat(t,"-1"),t,n,l,!1,"championship");e.eliminatedLabel="SECOND MATCH REQUIRED",m.push(e),h||(u.push(E("W".concat(t,"-1"),t,n,null,!0,"winners")),h=!0)}else d=!0}else if(1===r.length&&1===c.length&&s.matches.some(e=>("losers"===e.bracket||e.id.includes("LosersLast"))&&e.isCompleted&&e.winner&&c.some(s=>s.id===e.winner.id)))d=!0,m.push(E("C".concat(t,"-1"),t,r[0],c[0],!1,"championship")),h||(u.push(E("W".concat(t,"-1"),t,r[0],null,!0,"winners")),h=!0);else if(1===r.length&&c.length>=1&&e.winnersBracketFinalLoser){let n=s.matches.filter(e=>"losers"===e.bracket&&e.isCompleted&&e.winner).map(e=>e.winner).find(e=>c.some(s=>s.id===e.id));n&&n.id!==e.winnersBracketFinalLoser.id?(u.push(E("LosersLast-".concat(t),t,e.winnersBracketFinalLoser,n,!1,"losers")),p=!0,h||(u.push(E("W".concat(t,"-1"),t,r[0],null,!0,"winners")),h=!0)):(b(),1===r.length&&e.winnersBracketFinalLoser&&(h||(u.push(E("W".concat(t,"-1"),t,r[0],null,!0,"winners")),h=!0),p||(u.push(E("LWB".concat(t,"-1"),t,e.winnersBracketFinalLoser,null,!0,"losers")),p=!0)))}else 2===r.length&&c.length>=1?(u.push(E("W".concat(t,"-1"),t,r[0],r[1],!1,"winners")),h=!0,f()):b();function b(){let e=1;for(let n=0;n<r.length;n+=2){var s;let l=r[n],a=null!==(s=r[n+1])&&void 0!==s?s:null,i=!a;u.push(E("W".concat(t,"-").concat(e),t,l,a,i,"winners")),h=!0,e++}f()}function f(){let l=a.filter(s=>1===(n[s.id]||0)&&!e.eliminatedTeams.some(e=>e.id===s.id)&&!o.some(e=>e.id===s.id)&&!(e.winnersBracketFinalLoser&&e.winnersBracketFinalLoser.id===s.id)),i=s.matches.filter(e=>"winners"===e.bracket&&e.loser&&e.isCompleted).map(e=>e.loser).filter(e=>l.some(s=>s.id===e.id));if(s.matches.some(e=>"winners"===e.bracket&&1===r.length&&e.loser&&e.isCompleted)){let n=s.matches.filter(e=>"winners"===e.bracket&&e.isCompleted&&e.loser).map(e=>e.loser).pop();n&&(e.winnersBracketFinalLoser=n,7!==t||p||(u.push(E("LWB".concat(t,"-1"),t,n,null,!0,"losers")),p=!0))}if(3===t){let e=i.slice();if(e.length>=8){let s=e.slice(0,4),n=e.slice(4),a=l.filter(e=>!i.some(s=>s.id===e.id)),o=a.slice(0,4),r=a.slice(4);for(let e=0;e<Math.min(n.length,o.length);e++)u.push(E("L".concat(t,"-").concat(e+1),t,n[e],o[e],!1,"losers"));for(let e=0;e<Math.min(s.length,r.length);e++)u.push(E("L".concat(t,"-").concat(e+5),t,s[e],r[e],!1,"losers"));return}}else if(4===t){let s=i.slice();if(s.length>=4){let n=s.slice(0,2),a=s.slice(2,4),o=l.filter(e=>!i.some(s=>s.id===e.id)),r=e.rounds.find(e=>e.roundNumber===t-1),c=(r?r.matches.filter(e=>"losers"===e.bracket&&e.isCompleted&&e.winner):[]).map(e=>e.winner).filter(e=>o.some(s=>s.id===e.id)),d=[],m=[];if(c.length>=4)d=c.slice(0,2),m=c.slice(-2);else{let e=[...o].sort((e,s)=>(s.wins||0)-(e.wins||0));d=e.slice(0,2),m=e.slice(-2)}let h=1;for(let e=0;e<Math.min(n.length,d.length);e++)u.push(E("L".concat(t,"-").concat(h),t,n[e],d[e],!1,"losers")),h++;let p=o.filter(e=>!d.some(s=>s.id===e.id)&&!m.some(s=>s.id===e.id));for(let e=0;e<p.length;e+=2){let s=p[e],n=e+1<p.length?p[e+1]:null;u.push(E("L".concat(t,"-").concat(h),t,s,n,!n,"losers")),h++}for(let e=0;e<Math.min(a.length,m.length);e++)u.push(E("L".concat(t,"-").concat(h),t,a[e],m[e],!1,"losers")),h++;return}}else if(5===t){let e=i.slice();if(e.length>=2){let s=l.filter(e=>!i.some(s=>s.id===e.id)),n=1,a=e[0],o=s[0]||null;u.push(E("L".concat(t,"-").concat(n),t,a,o,!o,"losers")),n++;let r=s.slice(1,s.length-1);for(let e=0;e<r.length;e+=2){let s=r[e],l=r[e+1]||null;u.push(E("L".concat(t,"-").concat(n),t,s,l,!l,"losers")),n++}let c=e[1],d=s[s.length-1]||null;u.push(E("L".concat(t,"-").concat(n),t,c,d,!d,"losers")),n++;return}}let c=l.filter(e=>!i.some(s=>s.id===e.id)),d=[...i,...c];if(d.length>0){var m,h;if(d.length%2==1){let e=null;if(i.length>0){e=i[i.length-1];let s=d.findIndex(s=>s.id===e.id);-1!==s&&d.splice(s,1)}else e=d.shift();u.push(E("L".concat(t,"-1"),t,e,null,!0,"losers"));for(let e=0;e<d.length;e+=2){let s=d[e],n=null!==(m=d[e+1])&&void 0!==m?m:null;u.push(E("L".concat(t,"-").concat(Math.floor(e/2)+2),t,s,n,!n,"losers"))}}else for(let e=0;e<d.length;e+=2){let s=d[e],n=null!==(h=d[e+1])&&void 0!==h?h:null;u.push(E("L".concat(t,"-").concat(Math.floor(e/2)+1),t,s,n,!n,"losers"))}}7===t&&e.winnersBracketFinalLoser&&!p&&(u.push(E("LWB".concat(t,"-1"),t,e.winnersBracketFinalLoser,null,!0,"losers")),p=!0)}let w=e.winner;if(d){let s=m[0]||g[g.length-1];if(s&&s.isCompleted&&s.winner&&s.loser){s.team1;let t=s.team2;w=t&&s.winner.id===t.id&&1===e.championshipMatchesPlayed?void 0:s.winner}}return d&&0===m.length||!d&&0===u.length?{...e,winner:w,currentRound:e.currentRound}:(7===t&&e.winnersBracketFinalLoser&&!p&&u.push(E("LWB".concat(t,"-1"),t,e.winnersBracketFinalLoser,null,!0,"losers")),{...e,rounds:[...e.rounds,{roundNumber:t,matches:d?m:u,isDoubleElimination:!0,isChampionshipRound:d}],currentRound:t,eliminatedTeams:[...e.eliminatedTeams,...o.filter(s=>!e.eliminatedTeams.some(e=>e.id===s.id))],championshipMatchesPlayed:d?e.championshipMatchesPlayed+1:e.championshipMatchesPlayed,winnersBracketFinalLoser:e.winnersBracketFinalLoser,winner:w})},F=function(e,s,t,n){var l;let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"winners",o=arguments.length>6?arguments[6]:void 0,r=arguments.length>7?arguments[7]:void 0;return{id:e,roundNumber:s,team1:t,team2:n,isCompleted:a,isBye:a,bracket:i,winner:a&&null!==(l=null!=t?t:n)&&void 0!==l?l:void 0,loser:void 0,score:{team1Score:0,team2Score:0},nextMatchId:o,nextLoserMatchId:r,eliminatedLabel:void 0}},P=e=>{let s=e.length,t=[],n=Math.pow(2,Math.ceil(Math.log2(s))-1),l=1;for(let s=0;s<n;s++){let n=e[2*s]||null,a=e[2*s+1]||null,i=!n||!a,o="W1-".concat(l),r="W2-".concat(Math.ceil(l/2)),c="L1-".concat(Math.ceil(l/2));t.push(F(o,1,n,a,i,"winners",r,c)),l++}return{rounds:[{roundNumber:1,matches:t,isDoubleElimination:!0,isChampionshipRound:!1}],currentRound:1,eliminatedTeams:[],championshipMatchesPlayed:0}},W=(e,s)=>{let t,n;let l=s.team1Score!==s.team2Score;if(l){var a,i,o,r,c,d,m,u;s.team1Score>s.team2Score?(t=e.team1?{...e.team1,wins:(null!==(a=e.team1.wins)&&void 0!==a?a:0)+1,losses:null!==(i=e.team1.losses)&&void 0!==i?i:0}:void 0,n=e.team2?{...e.team2,wins:null!==(o=e.team2.wins)&&void 0!==o?o:0,losses:(null!==(r=e.team2.losses)&&void 0!==r?r:0)+1}:void 0):(t=e.team2?{...e.team2,wins:(null!==(c=e.team2.wins)&&void 0!==c?c:0)+1,losses:null!==(d=e.team2.losses)&&void 0!==d?d:0}:void 0,n=e.team1?{...e.team1,wins:null!==(m=e.team1.wins)&&void 0!==m?m:0,losses:(null!==(u=e.team1.losses)&&void 0!==u?u:0)+1}:void 0)}return{...e,score:s,isCompleted:l,winner:t,loser:n}},O=e=>{let s=e.rounds[e.rounds.length-1],t=e.currentRound+1,n={},l={};e.rounds.forEach(e=>{e.matches.forEach(e=>{e.isCompleted&&e.loser&&(n[e.loser.id]=(n[e.loser.id]||0)+1),e.isCompleted&&e.winner&&(l[e.winner.id]=(l[e.winner.id]||0)+1)})});let a=[],i=new Set;for(let s of e.rounds)for(let e of s.matches)e.team1&&!i.has(e.team1.id)&&(a.push({...e.team1,wins:l[e.team1.id]||0,losses:n[e.team1.id]||0}),i.add(e.team1.id)),e.team2&&!i.has(e.team2.id)&&(a.push({...e.team2,wins:l[e.team2.id]||0,losses:n[e.team2.id]||0}),i.add(e.team2.id));let o=[];for(let s of a)(n[s.id]||0)>=2&&!e.eliminatedTeams.some(e=>e.id===s.id)&&o.push(s);let r=a.filter(s=>0===(n[s.id]||0)&&!e.eliminatedTeams.some(e=>e.id===s.id)&&!o.some(e=>e.id===s.id)).map(e=>({...e,losses:n[e.id]||0,wins:l[e.id]||0})),c=a.filter(s=>1===(n[s.id]||0)&&!e.eliminatedTeams.some(e=>e.id===s.id)&&!o.some(e=>e.id===s.id)).map(e=>({...e,losses:n[e.id]||0,wins:l[e.id]||0})),d=!1,m=[],u=[],h=!1,p=!1,g=e.rounds.filter(e=>e.isChampionshipRound).flatMap(e=>e.matches).filter(e=>"championship"===e.bracket);if(g.length>=1&&g[g.length-1].isCompleted){var x;let s=g[g.length-1],n=s.team1,l=s.team2;(null===(x=s.winner)||void 0===x?void 0:x.id)===(null==l?void 0:l.id)&&1===e.championshipMatchesPlayed?(d=!0,m.push(F("C".concat(t,"-1"),t,n,l,!1,"championship")),h||(u.push(F("W".concat(t,"-1"),t,n,null,!0,"winners")),h=!0)):d=!0}else if(1===r.length&&1===c.length&&s.matches.some(e=>("losers"===e.bracket||e.id.includes("LosersLast"))&&e.isCompleted&&e.winner&&c.some(s=>s.id===e.winner.id)))d=!0,m.push(F("C".concat(t,"-1"),t,r[0],c[0],!1,"championship")),h||(u.push(F("W".concat(t,"-1"),t,r[0],null,!0,"winners")),h=!0);else if(1===r.length&&c.length>=1&&e.winnersBracketFinalLoser){let n=s.matches.filter(e=>"losers"===e.bracket&&e.isCompleted&&e.winner).map(e=>e.winner).find(e=>c.some(s=>s.id===e.id));n&&n.id!==e.winnersBracketFinalLoser.id?(u.push(F("LosersLast-".concat(t),t,e.winnersBracketFinalLoser,n,!1,"losers")),p=!0,h||(u.push(F("W".concat(t,"-1"),t,r[0],null,!0,"winners")),h=!0)):(b(),1===r.length&&e.winnersBracketFinalLoser&&(h||(u.push(F("W".concat(t,"-1"),t,r[0],null,!0,"winners")),h=!0),p||(u.push(F("LWB".concat(t,"-1"),t,e.winnersBracketFinalLoser,null,!0,"losers")),p=!0)))}else 2===r.length&&c.length>=1?(u.push(F("W".concat(t,"-1"),t,r[0],r[1],!1,"winners")),h=!0,f()):b();function b(){let e=1;for(let n=0;n<r.length;n+=2){var s;let l=r[n],a=null!==(s=r[n+1])&&void 0!==s?s:null,i=!a;u.push(F("W".concat(t,"-").concat(e),t,l,a,i,"winners")),h=!0,e++}f()}function f(){let l=a.filter(s=>1===(n[s.id]||0)&&!e.eliminatedTeams.some(e=>e.id===s.id)&&!o.some(e=>e.id===s.id)&&!(e.winnersBracketFinalLoser&&e.winnersBracketFinalLoser.id===s.id)),i=s.matches.filter(e=>"winners"===e.bracket&&e.loser&&e.isCompleted).map(e=>e.loser).filter(e=>l.some(s=>s.id===e.id));if(s.matches.some(e=>"winners"===e.bracket&&1===r.length&&e.loser&&e.isCompleted)){let n=s.matches.filter(e=>"winners"===e.bracket&&e.isCompleted&&e.loser).map(e=>e.loser).pop();n&&(e.winnersBracketFinalLoser=n,7!==t||p||(u.push(F("LWB".concat(t,"-1"),t,n,null,!0,"losers")),p=!0))}let c=l.filter(e=>!i.some(s=>s.id===e.id)),d=[...i,...c];if(d.length>0){var m,h;if(d.length%2==1){let e=null;if(i.length>0){e=i[i.length-1];let s=d.findIndex(s=>s.id===e.id);-1!==s&&d.splice(s,1)}else e=d.shift();u.push(F("L".concat(t,"-1"),t,e,null,!0,"losers"));for(let e=0;e<d.length;e+=2){let s=d[e],n=null!==(m=d[e+1])&&void 0!==m?m:null;u.push(F("L".concat(t,"-").concat(Math.floor(e/2)+2),t,s,n,!n,"losers"))}}else for(let e=0;e<d.length;e+=2){let s=d[e],n=null!==(h=d[e+1])&&void 0!==h?h:null;u.push(F("L".concat(t,"-").concat(Math.floor(e/2)+1),t,s,n,!n,"losers"))}}7===t&&e.winnersBracketFinalLoser&&!p&&(u.push(F("LWB".concat(t,"-1"),t,e.winnersBracketFinalLoser,null,!0,"losers")),p=!0)}let w=e.winner;if(d){let s=m[0]||g[g.length-1];if(s&&s.isCompleted&&s.winner&&s.loser){s.team1;let t=s.team2;w=t&&s.winner.id===t.id&&1===e.championshipMatchesPlayed?void 0:s.winner}}return d&&0===m.length||!d&&0===u.length?{...e,winner:w,currentRound:e.currentRound}:(7===t&&e.winnersBracketFinalLoser&&!p&&u.push(F("LWB".concat(t,"-1"),t,e.winnersBracketFinalLoser,null,!0,"losers")),{...e,rounds:[...e.rounds,{roundNumber:t,matches:d?m:u,isDoubleElimination:!0,isChampionshipRound:d}],currentRound:t,eliminatedTeams:[...e.eliminatedTeams,...o.filter(s=>!e.eliminatedTeams.some(e=>e.id===s.id))],championshipMatchesPlayed:d?e.championshipMatchesPlayed+1:e.championshipMatchesPlayed,winnersBracketFinalLoser:e.winnersBracketFinalLoser,winner:w})};(a=r||(r={})).MOREL="morel",a.MDLC="mdlc";let I="morel";function H(){return"morel"===I?c:d}function G(e){return I=e,localStorage.setItem("tournamentModel",e),H()}function z(e){return H().createInitialRounds(e)}var Y=t(5461),U=t(3357),J=t.n(U);function K(e){let{onTournamentUpdate:s,onModelChange:t,onResetCurrentRound:n}=e,[l,a]=(0,y.useState)(!1),[i,o]=(0,y.useState)(""),[c,d]=(0,y.useState)(r.MOREL);(0,y.useEffect)(()=>{d(function(){{let e=localStorage.getItem("tournamentModel");e&&Object.values(r).includes(e)&&(I=e)}return I}())},[]);let u=async()=>{if(confirm("Are you sure you want to reset the tournament? This cannot be undone.")){a(!0),o("");try{let e=await fetch("/api/tournament",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reset"})}),t=await e.json();e.ok?(o("Tournament reset successfully!"),s()):o("Error: ".concat(t.error))}catch(e){o("Failed to reset tournament"),console.error("Error resetting tournament:",e)}finally{a(!1)}}},h=e=>{d(e),G(e),t&&t(e),o("Switched to ".concat(e===r.MOREL?"Morel":"MDLC"," Model")),s()};return(0,m.jsxs)("div",{className:J().controls,children:[(0,m.jsx)("h2",{children:"Tournament Controls"}),(0,m.jsxs)("div",{className:J().controlsContainer,children:[(0,m.jsxs)("div",{className:J().modelControls,children:[(0,m.jsx)("h3",{className:J().sectionTitle,children:"Tournament Model"}),(0,m.jsxs)("div",{className:J().modelToggleContainer,children:[(0,m.jsx)("span",{className:"".concat(J().modelLabel," ").concat(c===r.MOREL?J().activeLabel:""),children:"Morel Model"}),(0,m.jsxs)("label",{className:J().toggleSwitch,children:[(0,m.jsx)("input",{type:"checkbox",checked:c===r.MDLC,onChange:()=>h(c===r.MOREL?r.MDLC:r.MOREL),disabled:l}),(0,m.jsx)("span",{className:J().toggleSlider})]}),(0,m.jsx)("span",{className:"".concat(J().modelLabel," ").concat(c===r.MDLC?J().activeLabel:""),children:"MDLC Model"})]})]}),(0,m.jsxs)("div",{className:J().tournamentActions,children:[(0,m.jsx)("h3",{className:J().sectionTitle,children:"Tournament Actions"}),(0,m.jsxs)("div",{className:J().buttonGroup,children:[(0,m.jsx)("button",{onClick:u,disabled:l,className:J().resetButton,children:l?"Resetting...":"Reset Tournament"}),n&&(0,m.jsx)("button",{onClick:n,disabled:l,className:J().resetCurrentButton,children:"Reset Current Round"})]})]})]}),i&&(0,m.jsx)("div",{className:J().message,children:i})]})}function V(){var e,s,t,n,l;let[a,o]=(0,y.useState)(i.MLB),[c,d]=(0,y.useState)(r.MOREL),[u,h]=(0,y.useState)(()=>(localStorage.removeItem("tournamentState"),R())),p=(0,y.useCallback)(e=>{d(e),G(e),h(R())},[]);if(!u)return(0,m.jsx)("div",{className:"p-8 text-red-600",children:"Tournament data is unavailable. Please refresh or reset the tournament."});let g=(0,y.useCallback)(e=>{h(s=>{var t;let n=(t=e.score,H().updateMatchScore(e,t)),l={...s,rounds:s.rounds.map(e=>({...e,matches:e.matches.map(e=>e.id===n.id?n:e)}))};return l.rounds[l.currentRound-1].matches.every(e=>e.isCompleted)?H().advanceToNextRound(l):l})},[]),x=(0,y.useCallback)(()=>{h(R())},[]);(0,y.useCallback)(async()=>{try{let e=await fetch("/api/tournament");if(e.ok){let s=await e.json();h(s)}}catch(e){console.error("Error refreshing tournament data:",e)}},[]);let b=(0,y.useCallback)(()=>{h(e=>{let s=e.currentRound-1;if(s<0||s>=e.rounds.length)return e;let t=e.rounds.map((e,t)=>t!==s?e:{...e,matches:e.matches.map(e=>({...e,score:{team1Score:0,team2Score:0},isCompleted:!1,winner:void 0,loser:void 0}))});return{...e,rounds:t}})},[]);return(0,m.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,m.jsxs)("div",{className:"container mx-auto px-4",children:[(0,m.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,m.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Tournament Bracket"})}),(0,m.jsxs)("div",{className:"flex justify-center mb-6 gap-4",children:[(0,m.jsxs)("button",{className:"flex flex-col items-center px-6 py-3 rounded-xl border-2 shadow-md transition-all duration-200\n      ".concat(a===i.MLB?"bg-[#092668] border-[#092668] text-white scale-105":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-blue-50","\n    "),onClick:()=>{o(i.MLB),h(z(v))},"aria-label":"Select MLB",type:"button",children:[(0,m.jsx)("div",{className:"w-10 h-10 mb-1 flex items-center justify-center bg-transparent rounded",children:(0,m.jsx)("img",{src:"/mlb-teams/mlb_logo.png",alt:"MLB Logo",className:"w-full h-full object-contain"})}),(0,m.jsx)("span",{className:"font-bold text-lg tracking-wide",children:"MLB"})]}),(0,m.jsxs)("button",{className:"flex flex-col items-center px-6 py-3 rounded-xl border-2 shadow-md transition-all duration-200\n      ".concat(a===i.NFL?"bg-[#002244] border-[#002244] text-white scale-105":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-blue-50","\n    "),onClick:()=>{o(i.NFL),h(z(N))},"aria-label":"Select NFL",type:"button",children:[(0,m.jsx)("img",{src:"/nfl-teams/nfl_logo.png",alt:"NFL Logo",className:"w-10 h-10 mb-1"}),(0,m.jsx)("span",{className:"font-bold text-lg tracking-wide",children:"NFL"})]}),(0,m.jsxs)("button",{className:"flex flex-col items-center px-6 py-3 rounded-xl border-2 shadow-md transition-all duration-200\n      ".concat(a===i.NBA?"bg-[#1D428A] border-[#1D428A] text-white scale-105":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-blue-50","\n    "),onClick:()=>{o(i.NBA),h(z(j))},"aria-label":"Select NBA",type:"button",children:[(0,m.jsx)("div",{className:"w-10 h-10 mb-1 flex items-center justify-center bg-white rounded",children:(0,m.jsx)("img",{src:"/nba-teams/nba_logo.png",alt:"NBA Logo",className:"w-full h-full object-contain"})}),(0,m.jsx)("span",{className:"font-bold text-lg tracking-wide",children:"NBA"})]})]}),(0,m.jsx)(K,{onTournamentUpdate:x,onModelChange:p,onResetCurrentRound:b}),(0,m.jsx)(S,{tournament:u,onMatchUpdate:g,selectedLeague:a,onResetCurrentRound:b}),(0,m.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,m.jsx)("h3",{className:"font-semibold text-blue-900",children:"Active Teams"}),(0,m.jsx)("p",{className:"text-2xl text-blue-600",children:(a===i.MLB?v.length:a===i.NFL?N.length:j.length)-(null!==(n=null==u?void 0:null===(e=u.eliminatedTeams)||void 0===e?void 0:e.length)&&void 0!==n?n:0)})]}),(0,m.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto max-h-40",children:[(0,m.jsx)("h3",{className:"font-semibold text-red-900 mb-2",children:"Eliminated Teams"}),(null!==(l=null==u?void 0:null===(s=u.eliminatedTeams)||void 0===s?void 0:s.length)&&void 0!==l?l:0)===0?(0,m.jsx)("p",{className:"text-red-600",children:"No teams eliminated yet."}):(0,m.jsx)("ul",{className:"list-disc list-inside text-red-600",children:null==u?void 0:null===(t=u.eliminatedTeams)||void 0===t?void 0:t.map(e=>(0,m.jsx)("li",{children:e.name},e.id))})]}),(0,m.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,m.jsx)("h3",{className:"font-semibold text-green-900",children:"Current Round"}),(0,m.jsx)("p",{className:"text-2xl text-green-600",children:u.currentRound})]})]})]})})}function q(){return(0,m.jsx)(Y.Z,{children:(0,m.jsx)(V,{})})}},5461:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var n=t(7437),l=t(2265),a=t(6691),i=t.n(a);function o(e){let{onAuthSuccess:s}=e,[t,a]=(0,l.useState)(""),[o,r]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[m,u]=(0,l.useState)(!1);return(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-gradient-to-br from-[#a259f7] via-black to-[#a259f7] animate-fade-in",children:(0,n.jsxs)("div",{className:"bg-white bg-opacity-90 rounded-3xl shadow-2xl p-10 flex flex-col items-center gap-6 min-w-[320px] max-w-xs",children:[(0,n.jsx)(i(),{src:"/BDC_logo.svg",alt:"App Logo",width:120,height:120,className:"rounded-2xl animate-bounce bg-transparent"}),(0,n.jsx)("h1",{className:"text-3xl font-extrabold text-purple-800 tracking-tight drop-shadow mb-2 text-center",children:"Welcome to BDC-Tourney"}),(0,n.jsxs)("form",{className:"w-full flex flex-col gap-4",onSubmit:e=>{e.preventDefault(),u(!0),setTimeout(()=>{"BDC"===t&&"Godfirst"===o?(localStorage.setItem("tourneyV5_auth","authenticated"),d(""),s()):d("Invalid username or password. Try again!"),u(!1)},800)},children:[(0,n.jsx)("input",{type:"text",placeholder:"Username",autoFocus:!0,className:"px-4 py-2 rounded-xl border-2 border-[#1d428a] focus:ring-2 focus:ring-[#c8102e] text-lg outline-none transition",value:t,onChange:e=>a(e.target.value),disabled:m}),(0,n.jsx)("input",{type:"password",placeholder:"Password",className:"px-4 py-2 rounded-xl border-2 border-[#1d428a] focus:ring-2 focus:ring-[#c8102e] text-lg outline-none transition",value:o,onChange:e=>r(e.target.value),disabled:m}),(0,n.jsx)("button",{type:"submit",className:"w-full py-2 rounded-xl font-bold text-lg bg-purple-800 text-white shadow hover:bg-[#c8102e] transition",disabled:m,children:m?"Checking...":"Enter Tournament"})]}),c&&(0,n.jsx)("div",{className:"text-red-600 font-semibold text-center animate-shake",children:c}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Private access only. Please contact the administrator if you need credentials."})]})})}function r(e){let{children:s}=e,[t,a]=(0,l.useState)(!1),[i,r]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{a("authenticated"===localStorage.getItem("tourneyV5_auth")),r(!0)},[]),i)?t?(0,n.jsx)(n.Fragment,{children:s}):(0,n.jsx)(o,{onAuthSuccess:()=>a(!0)}):null}},3357:function(e){e.exports={controls:"TournamentControls_controls__Ax4FQ",controlsContainer:"TournamentControls_controlsContainer__VZOz0",sectionTitle:"TournamentControls_sectionTitle__1PZ0I",modelControls:"TournamentControls_modelControls__lwMgf",tournamentActions:"TournamentControls_tournamentActions__NFs_w",modelToggleContainer:"TournamentControls_modelToggleContainer__cooiS",modelLabel:"TournamentControls_modelLabel__2YWIZ",activeLabel:"TournamentControls_activeLabel__QTzM_",toggleSwitch:"TournamentControls_toggleSwitch__Sf0KL",toggleSlider:"TournamentControls_toggleSlider__MNVYN",buttonGroup:"TournamentControls_buttonGroup__PQoHq",resetButton:"TournamentControls_resetButton__eRDq9",resetCurrentButton:"TournamentControls_resetCurrentButton__PYdXh",message:"TournamentControls_message__iA2n5",fadeIn:"TournamentControls_fadeIn__1H0Ju"}}},function(e){e.O(0,[986,945,971,938,744],function(){return e(e.s=2894)}),_N_E=e.O()}]);